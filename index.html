
<!DOCTYPE html>
<html>
    <head>
        <meta charset=UTF-8/>
        <title>3D JSON Model</title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100% }
        </style>
    </head>
    <body>
        <script type="module">
            // Import libraries needed for 3D rendering
            import * as THREE from '/node_modules/three';
            import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
            import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

            let scene, camera, renderer, controls, hlight;

            init()

            function init() {
                // Set up the scene
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0xdddddd)

                // Set up the camera
                camera = new THREE.PerspectiveCamera(30, window.innerWidth/window.innerHeight, 1, 1000);
                camera.position.x = 0;
                camera.position.y = 400;
                camera.position.z = 0;

                // Add ambient light
                hlight = new THREE.AmbientLight (0x404040, 15);
                scene.add(hlight);

                // Set up over-head light
                const light = new THREE.DirectionalLight( 0xffffff, 0.2 );
                light.position.set( .3, 1.1, 0.4 ); //default; light shining from top
                light.castShadow = true; // default false
                scene.add( light );

                // Set up the renderer
                renderer = new THREE.WebGLRenderer({antialias:true});
                renderer.shadowMap.enabled = true;
                renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);

                // Add orbit controls
                controls = new OrbitControls(camera, renderer.domElement);


                // Add loader for object to render
                let loader = new GLTFLoader();
                loader.load('./models/ERI_render.glb', function(gltf){
                    gltf.scene.position.set(11,-50,-9)
                    scene.add(gltf.scene);
                    renderer.render(scene,camera);
                })

                animate();
            }

            function animate() {
                requestAnimationFrame(animate);

                // Update the orbit controls
                controls.update();

                renderer.render(scene, camera);
            }


        </script>

    </body>
</html>